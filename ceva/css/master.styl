// remove this mixin in order to disable LFA specific css
lfa-framework()

html, body
  height: 100%
  width: 100%

// "Holy Grail" layout, with left and right sidebar.
sidebar-width = 250px
body
  padding: 0 sidebar-width
  
  #rightbar-toggle
  #leftbar-toggle
  .btn-group
    display: none !important
  
  > section, #textbook
    height: 100%
  
  > nav
  > aside
    width: sidebar-width
    position: fixed
    height: 100%
    overflow-y: auto
    z-index: 1000
    top: 0px
  
  > nav
    left: 0px
  
  > aside
    right: 0px
  
  @media max-phone
    padding-left: 0
    #leftbar-toggle
      display: block !important
    > nav
      left: - sidebar-width
    &.leftbar-active > nav
      translate3d(sidebar-width, 0, 0)
  
  @media max-tablet
    padding-right: 0
    #rightbar-toggle, .btn-group
      display: block !important
    > aside
      right: - sidebar-width
    &.rightbar-active > aside
      translate3d(- sidebar-width, 0, 0)

// Eye candy for devices that can handle it.
body.high-performance
  > section
    transition: opacity tduration ease
    opacity: 1
  
  > nav
  > aside
    transition: transform tduration ease
  
  > nav
    ul li a
      transition: all 0.1s linear
  
  @media max-phone
    &.leftbar-active
      > section
        opacity: 0.5
  
  @media max-tablet
    &.rightbar-active
      > section
        opacity: 0.5

// This rule is used to stop the body element from scrolling when a sidebar is in focus.
body.leftbar-active, body.rightbar-active, body.no-scroll
  position: fixed;

halfgutter = ($grid-gutter-width / 2)
#textbook > article
body > nav
body > aside
  @extend .container
  padding-top: halfgutter

body > nav, body > aside
  background: flat_midnight_blue
  color: flat_clouds

body > nav
  // padding-top: 0
  ul
    list-style-type: none
    padding: 0
    
    li
      cursor: pointer
    
    a
      color: flat_clouds
      height: 100%
      width: 100%
      display: block
      padding: halfgutter
      font-size: 20px
      font-weight: 200
      letter-spacing: 1px
      margin-bottom: 2px
      
      &:hover
        text-decoration: none
      
      .title, .subtitle
        display: block
      
      .subtitle
        font-size: 16px
        color: flat_asbestos
        letter-spacing: 0px
        text-overflow: ellipsis
        white-space: nowrap
        overflow: hidden
    
    li.active > a, li a:hover
      background: flat_clouds
      color: flat_midnight_blue
  
  toclibgcolor = flat_wet_asphalt
  > ul
    > li
      margin: 0px (- halfgutter) 2px (- halfgutter)
      // first level chapters
      > a
        background: toclibgcolor
      
      > ul
        > li
          // second level chapters
          > a
            padding-left: (halfgutter + 10px)
            font-size: 16px
            background: darken(toclibgcolor, 10%)
          
          > ul
            > li
              // third level chapters and beyond
              a
                padding-left: (halfgutter + 20px)
                font-size: 16px
                background: darken(toclibgcolor, 20%)

#textbook > article
  h1:first-child
    margin-top: 0